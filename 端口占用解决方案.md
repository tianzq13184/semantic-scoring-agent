# 端口占用解决方案

## 问题
启动时遇到：`ERROR: [Errno 48] Address already in use`

## 解决方案

### 方法1：停止占用端口的进程（推荐）

```bash
# 查找占用8000端口的进程
lsof -ti:8000

# 停止进程（替换 PID 为实际进程号）
kill <PID>

# 或者强制停止
kill -9 <PID>
```

### 方法2：使用其他端口

如果不想停止现有进程，可以使用其他端口：

```bash
# 使用8001端口
uvicorn api.main:app --reload --port 8001
```

然后记得更新 `.env` 文件中的 `API_BASE`：
```env
API_BASE=http://127.0.0.1:8001
```

### 方法3：一键停止所有 uvicorn 进程

```bash
# 停止所有 uvicorn 进程
pkill -f "uvicorn.*api.main"

# 或者更精确的方式
ps aux | grep "uvicorn.*api.main" | grep -v grep | awk '{print $2}' | xargs kill
```

## 验证端口是否释放

```bash
# 检查8000端口
lsof -ti:8000

# 如果没有输出，说明端口已释放
```

## 重新启动

端口释放后，重新运行：

```bash
uvicorn api.main:app --reload --port 8000
```

